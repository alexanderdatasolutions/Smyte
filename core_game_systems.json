{
  "architecture": {
    "battle_system_modules": {
      "BattleManager.gd": {
        "purpose": "Core battle orchestration and coordination",
        "responsibilities": [
          "Battle state management (start/end)",
          "Turn order coordination between systems",
          "Victory/defeat condition checking",
          "Signal emissions to UI",
          "Auto-battle toggle management"
        ],
        "dependencies": ["TurnSystem", "StatusEffectManager", "EnemyFactory", "BattleAI", "CombatCalculator"]
      },
      "CombatCalculator.gd": {
        "purpose": "All damage/healing calculations",
        "responsibilities": [
          "Physical damage formulas with crit/accuracy",
          "Magical damage with elemental advantages", 
          "True damage calculations",
          "Healing amount calculations",
          "Speed-based turn order calculation"
        ],
        "type": "static_utility_class",
        "dependencies": []
      },
      "StatusEffectManager.gd": {
        "purpose": "Status effect lifecycle management", 
        "responsibilities": [
          "Apply/remove status effects",
          "Process turn-start/end effects",
          "Status effect interactions (cleanse, immunity)",
          "DOT/HOT processing",
          "Buff/debuff classification"
        ],
        "type": "static_utility_class",
        "dependencies": ["StatusEffect"]
      },
      "TurnSystem.gd": {
        "purpose": "Turn order and action processing",
        "responsibilities": [
          "Speed-based turn order calculation",
          "Turn advancement logic",
          "Action validation (stunned, dead units)",
          "Turn cycle management",
          "Dead unit removal from turn order"
        ],
        "dependencies": ["CombatCalculator"]
      },
      "BattleAI.gd": {
        "purpose": "All AI decision making",
        "responsibilities": [
          "God auto-battle AI with priority system",
          "Enemy AI behavior patterns",
          "Target selection algorithms",
          "Ability usage priorities",
          "Combat situation assessment"
        ],
        "type": "static_utility_class", 
        "dependencies": ["God"]
      },
      "EnemyFactory.gd": {
        "purpose": "Enemy creation and configuration",
        "responsibilities": [
          "Enemy creation based on territory/stage",
          "Stat calculation with difficulty scaling",
          "Enemy composition determination",
          "Enemy ability assignment",
          "Territory-appropriate enemy selection"
        ],
        "type": "static_utility_class",
        "dependencies": ["Territory"]
      }
    },
    "refactor_benefits": {
      "maintainability": "Each system has single responsibility",
      "debuggability": "Issues contained to specific systems", 
      "testability": "Can test individual components in isolation",
      "extensibility": "Easy to add new mechanics to appropriate system",
      "performance": "Can optimize individual systems separately"
    }
  },

  "combat_system": {
    "turn_order": {
      "type": "speed_based_action_bar",
      "action_bar_max": 1000,
      "base_tick_rate": "speed * 1",
      "description": "Units gain action bar based on speed. First to 1000 acts."
    },
    
    "damage_formulas": {
      "physical_damage": {
        "formula": "(attacker.attack * skill_multiplier) * (100 / (100 + defender.defense))",
        "can_crit": true,
        "can_miss": true
      },
      "magical_damage": {
        "formula": "(attacker.attack * skill_multiplier) * (100 / (100 + defender.defense * 0.7))",
        "can_crit": true,
        "can_miss": false
      },
      "true_damage": {
        "formula": "attacker.attack * skill_multiplier",
        "can_crit": false,
        "can_miss": false
      },
      "healing": {
        "formula": "healer.attack * healing_multiplier * (1 + healing_bonus)",
        "can_crit": true,
        "can_miss": false
      }
    },
    
    "combat_stats": {
      "crit_chance": {
        "base": 0.15,
        "per_point": 0.01,
        "cap": 1.0
      },
      "crit_damage": {
        "base": 1.5,
        "per_point": 0.01,
        "cap": 3.0
      },
      "accuracy": {
        "base": 1.0,
        "per_point": 0.01,
        "formula": "accuracy - evasion"
      },
      "evasion": {
        "base": 0.0,
        "per_point": 0.01,
        "cap": 0.75
      },
      "resistance": {
        "base": 0.15,
        "per_point": 0.01,
        "cap": 0.85,
        "description": "Chance to resist debuffs"
      },
      "effectiveness": {
        "base": 0.0,
        "per_point": 0.01,
        "cap": 0.85,
        "description": "Increases chance to apply debuffs"
      }
    },
    
    "element_system": {
      "advantage_multiplier": 1.3,
      "disadvantage_multiplier": 0.7,
      "advantage_crit_bonus": 0.15,
      "advantages": {
        "fire": ["earth"],
        "earth": ["lightning"],
        "lightning": ["water"],
        "water": ["fire"],
        "light": ["dark"],
        "dark": ["light"]
      }
    }
  },
  
  "status_effects": {
    "debuffs": {
      "stun": {
        "type": "disable",
        "prevents_action": true,
        "duration_type": "turns",
        "default_duration": 1,
        "can_resist": true
      },
      "freeze": {
        "type": "disable",
        "prevents_action": true,
        "duration_type": "turns",
        "default_duration": 1,
        "breaks_on_damage": true,
        "can_resist": true
      },
      "silence": {
        "type": "disable",
        "prevents_abilities": true,
        "allows_basic_attack": true,
        "duration_type": "turns",
        "default_duration": 2,
        "can_resist": true
      },
      "blind": {
        "type": "impairment",
        "accuracy_reduction": 0.5,
        "duration_type": "turns",
        "default_duration": 2,
        "can_resist": true
      },
      "slow": {
        "type": "impairment",
        "speed_multiplier": 0.5,
        "duration_type": "turns",
        "default_duration": 2,
        "can_resist": true
      },
      "burn": {
        "type": "dot",
        "damage_per_turn": 0.15,
        "damage_based_on": "max_hp",
        "duration_type": "turns",
        "default_duration": 3,
        "can_resist": false
      },
      "bleed": {
        "type": "dot",
        "damage_per_turn": 0.10,
        "damage_based_on": "max_hp",
        "duration_type": "turns",
        "default_duration": 3,
        "ignores_defense": true,
        "can_resist": false
      },
      "poison": {
        "type": "dot",
        "damage_per_turn": 0.05,
        "damage_based_on": "max_hp",
        "duration_type": "turns",
        "default_duration": 5,
        "stacks": true,
        "max_stacks": 10,
        "can_resist": false
      },
      "curse": {
        "type": "impairment",
        "healing_reduction": 0.5,
        "duration_type": "turns",
        "default_duration": 3,
        "can_resist": true
      },
      "fear": {
        "type": "disable",
        "prevents_action": true,
        "chance_to_skip_turn": 0.5,
        "duration_type": "turns",
        "default_duration": 2,
        "can_resist": true
      },
      "charm": {
        "type": "control",
        "attacks_allies": true,
        "duration_type": "turns",
        "default_duration": 1,
        "can_resist": true
      },
      "taunt": {
        "type": "control",
        "forces_target": true,
        "duration_type": "turns",
        "default_duration": 2,
        "can_resist": true
      },
      "marked_for_death": {
        "type": "vulnerability",
        "damage_increase_taken": 0.25,
        "duration_type": "turns",
        "default_duration": 3,
        "can_resist": false
      },
      "attack_reduction": {
        "type": "stat_reduction",
        "stat": "attack",
        "reduction": 0.3,
        "duration_type": "turns",
        "default_duration": 3,
        "can_resist": true
      },
      "defense_reduction": {
        "type": "stat_reduction",
        "stat": "defense",
        "reduction": 0.3,
        "duration_type": "turns",
        "default_duration": 3,
        "can_resist": true
      },
      "immobilize": {
        "type": "disable",
        "prevents_movement": true,
        "allows_abilities": true,
        "duration_type": "turns",
        "default_duration": 2,
        "can_resist": true
      }
    },
    
    "buffs": {
      "shield": {
        "type": "defensive",
        "absorbs_damage": true,
        "shield_value": "caster.attack * 0.5",
        "duration_type": "turns",
        "default_duration": 3,
        "can_dispel": true
      },
      "damage_immunity": {
        "type": "defensive",
        "immune_to_damage": true,
        "duration_type": "turns",
        "default_duration": 1,
        "can_dispel": false
      },
      "debuff_immunity": {
        "type": "defensive",
        "immune_to_debuffs": true,
        "duration_type": "turns",
        "default_duration": 2,
        "can_dispel": true
      },
      "regeneration": {
        "type": "heal_over_time",
        "heal_per_turn": 0.15,
        "heal_based_on": "max_hp",
        "duration_type": "turns",
        "default_duration": 3,
        "can_dispel": true
      },
      "attack_boost": {
        "type": "stat_boost",
        "stat": "attack",
        "increase": 0.5,
        "duration_type": "turns",
        "default_duration": 3,
        "can_dispel": true
      },
      "defense_boost": {
        "type": "stat_boost",
        "stat": "defense",
        "increase": 0.5,
        "duration_type": "turns",
        "default_duration": 3,
        "can_dispel": true
      },
      "speed_boost": {
        "type": "stat_boost",
        "stat": "speed",
        "increase": 0.3,
        "duration_type": "turns",
        "default_duration": 2,
        "can_dispel": true
      },
      "crit_boost": {
        "type": "stat_boost",
        "stat": "crit_chance",
        "increase": 0.3,
        "duration_type": "turns",
        "default_duration": 3,
        "can_dispel": true
      },
      "accuracy_boost": {
        "type": "stat_boost",
        "stat": "accuracy",
        "increase": 0.5,
        "duration_type": "turns",
        "default_duration": 3,
        "can_dispel": true
      },
      "counter_attack": {
        "type": "reactive",
        "counter_chance": 0.75,
        "counter_damage": 0.7,
        "duration_type": "turns",
        "default_duration": 2,
        "can_dispel": true
      },
      "untargetable": {
        "type": "defensive",
        "cannot_be_targeted": true,
        "duration_type": "turns",
        "default_duration": 1,
        "can_dispel": false
      },
      "invincible": {
        "type": "defensive",
        "prevents_hp_below": 1,
        "duration_type": "turns",
        "default_duration": 1,
        "can_dispel": false
      },
      "reflect_damage": {
        "type": "reactive",
        "reflect_percentage": 0.3,
        "duration_type": "turns",
        "default_duration": 3,
        "can_dispel": true
      },
      "life_steal": {
        "type": "offensive",
        "steal_percentage": 0.3,
        "duration_type": "turns",
        "default_duration": 3,
        "can_dispel": true
      },
      "extra_turn": {
        "type": "special",
        "grants_immediate_turn": true,
        "duration_type": "instant",
        "can_dispel": false
      },
      "revive_on_death": {
        "type": "special",
        "revive_hp_percentage": 0.5,
        "duration_type": "until_triggered",
        "can_dispel": false
      }
    }
  },
  
  "ability_effects": {
    "targeting_types": {
      "single": { "max_targets": 1 },
      "multiple": { "max_targets": 3 },
      "all_enemies": { "targets_all_enemies": true },
      "all_allies": { "targets_all_allies": true },
      "self": { "targets_self_only": true },
      "random": { "random_target": true },
      "lowest_hp_ally": { "targets_lowest_hp_ally": true },
      "highest_attack_enemy": { "targets_highest_attack_enemy": true },
      "fallen_ally": { "targets_dead_ally": true }
    },
    
    "special_effects": {
      "chain_effect": {
        "description": "Damage jumps between enemies",
        "jump_count": 3,
        "damage_reduction_per_jump": 0.7
      },
      "area_damage": {
        "description": "Damage splashes to nearby enemies",
        "splash_damage": 0.5,
        "splash_radius": "adjacent"
      },
      "double_hit": {
        "description": "Hits twice",
        "hit_count": 2,
        "damage_per_hit": 0.7
      },
      "multiple_hits": {
        "description": "Hits multiple times",
        "min_hits": 3,
        "max_hits": 5,
        "damage_per_hit": 0.4
      },
      "guaranteed_crit": {
        "description": "Always critical hit",
        "crit_chance_override": 1.0
      },
      "ignore_defense": {
        "description": "Ignores enemy defense",
        "defense_penetration": 1.0
      },
      "cannot_miss": {
        "description": "Always hits",
        "accuracy_override": 999
      },
      "armor_pierce": {
        "description": "Partial defense ignore",
        "defense_penetration": 0.5
      },
      "heal_block": {
        "description": "Prevents healing",
        "blocks_healing": true,
        "duration": 2
      },
      "dispel": {
        "description": "Removes buffs/debuffs",
        "removes_buffs": true,
        "buff_count": 2
      },
      "cleanse": {
        "description": "Removes debuffs from allies",
        "removes_debuffs": true,
        "debuff_count": "all"
      },
      "steal_buffs": {
        "description": "Steals enemy buffs",
        "steal_count": 2
      },
      "copy_buffs": {
        "description": "Copies ally buffs",
        "copy_from": "highest_stat_ally",
        "copy_count": 3
      },
      "reset_cooldowns": {
        "description": "Resets ability cooldowns",
        "reset_count": "all"
      },
      "increase_cooldowns": {
        "description": "Increases enemy cooldowns",
        "cooldown_increase": 2
      },
      "ignore_immunity": {
        "description": "Bypasses immunity effects",
        "bypass_immunity": true
      },
      "execute": {
        "description": "Instantly kills if below HP threshold",
        "hp_threshold": 0.3
      },
      "resurrect": {
        "description": "Brings ally back from death",
        "revive_hp_percentage": 0.5
      },
      "swap_hp": {
        "description": "Swaps HP percentages with target",
        "swap_current_hp_percentage": true
      },
      "share_damage": {
        "description": "Distributes damage among team",
        "damage_distribution": "equal"
      },
      "absorb_stats": {
        "description": "Temporarily steals enemy stats",
        "stat_steal_percentage": 0.2,
        "duration": 3
      }
    }
  },
  
  "progression_systems": {
    "hero_progression": {
      "level": {
        "max": 60,
        "exp_formula": "level * 100 * (1 + level * 0.1)",
        "stat_gain_per_level": {
          "hp": 60,
          "attack": 12,
          "defense": 8,
          "speed": 6
        }
      },
      "ascension": {
        "tiers": ["bronze", "silver", "gold", "platinum", "diamond", "mythic"],
        "requirements": {
          "bronze": { "duplicates": 0, "level": 1 },
          "silver": { "duplicates": 1, "level": 20 },
          "gold": { "duplicates": 3, "level": 40 },
          "platinum": { "duplicates": 6, "level": 60 },
          "diamond": { "duplicates": 10, "level": 80 },
          "mythic": { "duplicates": 15, "level": 100 }
        },
        "stat_multipliers": {
          "bronze": 1.0,
          "silver": 1.2,
          "gold": 1.5,
          "platinum": 1.8,
          "diamond": 2.2,
          "mythic": 2.8
        }
      },
      "awakening": {
        "description": "Summoners War-style awakening system - transforms gods into evolved forms",
        "requirements": {
          "level_requirement": 30,
          "ascension_requirement": "silver",
          "max_skills_requirement": true
        },
        "material_system": {
          "elemental_essences": {
            "fire": {
              "low": { "required": 10, "sources": ["dungeons", "scenarios"] },
              "mid": { "required": 5, "sources": ["dungeons", "weekly_rewards"] },
              "high": { "required": 20, "sources": ["high_dungeons", "events"] }
            },
            "water": {
              "low": { "required": 10, "sources": ["dungeons", "scenarios"] },
              "mid": { "required": 5, "sources": ["dungeons", "weekly_rewards"] },
              "high": { "required": 20, "sources": ["high_dungeons", "events"] }
            },
            "earth": {
              "low": { "required": 10, "sources": ["dungeons", "scenarios"] },
              "mid": { "required": 5, "sources": ["dungeons", "weekly_rewards"] },
              "high": { "required": 20, "sources": ["high_dungeons", "events"] }
            },
            "lightning": {
              "low": { "required": 10, "sources": ["dungeons", "scenarios"] },
              "mid": { "required": 5, "sources": ["dungeons", "weekly_rewards"] },
              "high": { "required": 20, "sources": ["high_dungeons", "events"] }
            },
            "light": {
              "low": { "required": 15, "sources": ["special_dungeons", "events"] },
              "mid": { "required": 10, "sources": ["special_dungeons", "monthly_rewards"] },
              "high": { "required": 25, "sources": ["rare_dungeons", "premium_events"] }
            },
            "dark": {
              "low": { "required": 15, "sources": ["special_dungeons", "events"] },
              "mid": { "required": 10, "sources": ["special_dungeons", "monthly_rewards"] },
              "high": { "required": 25, "sources": ["rare_dungeons", "premium_events"] }
            }
          },
          "special_materials": {
            "awakening_stones": { "required": 10, "sources": ["boss_battles", "events", "shop"] },
            "divine_crystals": { "required": 5, "sources": ["territory_conquest", "arena", "events"] },
            "pantheon_relics": {
              "greek": { "required": 3, "sources": ["greek_territory", "events"] },
              "norse": { "required": 3, "sources": ["norse_territory", "events"] },
              "egyptian": { "required": 3, "sources": ["egyptian_territory", "events"] },
              "hindu": { "required": 3, "sources": ["hindu_territory", "events"] },
              "celtic": { "required": 3, "sources": ["celtic_territory", "events"] },
              "japanese": { "required": 3, "sources": ["japanese_territory", "events"] }
            }
          }
        },
        "awakening_benefits": {
          "stat_bonuses": {
            "description": "Significant base stat increases",
            "hp_bonus": { "min": 0.20, "max": 0.50 },
            "attack_bonus": { "min": 0.15, "max": 0.40 },
            "defense_bonus": { "min": 0.15, "max": 0.40 },
            "speed_bonus": { "min": 0.10, "max": 0.30 }
          },
          "skill_changes": {
            "description": "Skills are enhanced or replaced",
            "enhanced_multipliers": { "increase": 0.2 },
            "new_effects": ["additional_hits", "status_effects", "special_mechanics"],
            "cooldown_improvements": -1
          },
          "visual_changes": {
            "new_appearance": true,
            "evolved_effects": true,
            "awakened_aura": true
          },
          "name_changes": {
            "awakened_name": true,
            "new_title": true,
            "description_update": true
          },
          "leader_skills": {
            "description": "May gain new or enhanced leader skills",
            "territory_bonuses": true,
            "pantheon_synergies": true
          }
        },
        "star_system": {
          "description": "Additional progression after awakening",
          "max_stars": 5,
          "stones_per_star": [5, 10, 20, 40, 80],
          "bonus_per_star": {
            "all_stats": 0.05,
            "ability_damage": 0.1
          }
        }
      },
      "skills": {
        "upgrade_levels": 10,
        "cost_formula": "level * 100 * skill_level",
        "damage_increase_per_level": 0.1,
        "cooldown_reduction": {
          "at_level": [3, 6, 9],
          "reduction": 1
        }
      }
    },
    
    "equipment_system": {
      "slots": ["weapon", "armor", "boots", "accessory"],
      "rarities": ["common", "rare", "epic", "legendary", "mythic"],
      "stat_ranges": {
        "common": { "min": 10, "max": 50 },
        "rare": { "min": 40, "max": 100 },
        "epic": { "min": 80, "max": 200 },
        "legendary": { "min": 150, "max": 400 },
        "mythic": { "min": 300, "max": 800 }
      },
      "possible_stats": ["hp", "attack", "defense", "speed", "crit_chance", "crit_damage", "accuracy", "resistance"],
      "enhancement": {
        "max_level": 15,
        "stat_increase_per_level": 0.1,
        "cost_formula": "level * item_rarity_multiplier * 100"
      },
      "set_bonuses": {
        "attack_set": { "pieces": 4, "bonus": { "attack": 0.35 } },
        "defense_set": { "pieces": 4, "bonus": { "defense": 0.35 } },
        "speed_set": { "pieces": 4, "bonus": { "speed": 0.25 } },
        "crit_set": { "pieces": 2, "bonus": { "crit_chance": 0.15 } },
        "hp_set": { "pieces": 2, "bonus": { "hp": 0.20 } },
        "resistance_set": { "pieces": 2, "bonus": { "resistance": 0.20 } }
      }
    }
  },
  
  "resource_systems": {
    "currencies": {
      "gold": {
        "primary_use": "upgrades",
        "sources": ["battles", "territories", "dailies", "territory_generation"]
      },
      "divine_essence": {
        "primary_use": "summons",
        "sources": ["battles", "achievements", "events", "territory_generation"]
      },
      "crystals": {
        "primary_use": "premium_summons",
        "sources": ["territory_boss", "pvp", "purchase"],
        "premium": true
      },
      "awakening_stones": {
        "primary_use": "hero_awakening",
        "sources": ["boss_battles", "events", "shop", "high_tier_territories"],
        "description": "Generic awakening material for all gods"
      },
      "elemental_essences": {
        "fire_essence": {
          "types": ["low", "mid", "high"],
          "sources": ["fire_dungeons", "fire_scenarios", "daily_rewards"],
          "used_for": "fire_element_gods"
        },
        "water_essence": {
          "types": ["low", "mid", "high"],
          "sources": ["water_dungeons", "water_scenarios", "daily_rewards"],
          "used_for": "water_element_gods"
        },
        "earth_essence": {
          "types": ["low", "mid", "high"],
          "sources": ["earth_dungeons", "earth_scenarios", "daily_rewards"],
          "used_for": "earth_element_gods"
        },
        "lightning_essence": {
          "types": ["low", "mid", "high"],
          "sources": ["lightning_dungeons", "lightning_scenarios", "daily_rewards"],
          "used_for": "lightning_element_gods"
        },
        "light_essence": {
          "types": ["low", "mid", "high"],
          "sources": ["light_dungeons", "special_events", "monthly_rewards"],
          "used_for": "light_element_gods",
          "rarity": "rare"
        },
        "dark_essence": {
          "types": ["low", "mid", "high"],
          "sources": ["dark_dungeons", "special_events", "monthly_rewards"],
          "used_for": "dark_element_gods",
          "rarity": "rare"
        }
      },
      "divine_crystals": {
        "primary_use": "awakening_catalyst",
        "sources": ["territory_conquest", "arena_rewards", "guild_content"],
        "description": "Rare crystals that channel divine power for awakening"
      },
      "pantheon_relics": {
        "greek_relics": { "sources": ["greek_territories", "olympian_events"] },
        "norse_relics": { "sources": ["norse_territories", "asgard_events"] },
        "egyptian_relics": { "sources": ["egyptian_territories", "pyramid_events"] },
        "hindu_relics": { "sources": ["hindu_territories", "vedic_events"] },
        "celtic_relics": { "sources": ["celtic_territories", "druid_events"] },
        "japanese_relics": { "sources": ["japanese_territories", "shrine_events"] },
        "description": "Pantheon-specific materials for awakening gods from that mythology"
      },
      "skill_books": {
        "primary_use": "skill_upgrades",
        "sources": ["campaign", "guild", "events", "tier_2_3_territories"]
      },
      "equipment_ore": {
        "primary_use": "equipment_crafting",
        "sources": ["territories", "dismantling", "shop"]
      }
    },
    
    "energy_systems": {
      "battle_energy": {
        "max": 120,
        "regen_rate": "1 per 5 minutes",
        "cost_per_battle": 6
      }
    },
    
    "territory_system": {
      "description": "Summoners War-style territory conquest with god assignment and PvP defense",
      
      "conquest_mechanics": {
        "stage_progression": {
          "stages_per_territory": 10,
          "energy_cost_per_stage": 8,
          "difficulty_scaling": "1.2x per stage",
          "unlock_condition": "clear_all_stages",
          "god_assignment_unlock": "territory_cleared"
        },
        "victory_conditions": {
          "stage_clear": "defeat_all_enemies",
          "territory_unlock": "clear_final_stage",
          "resource_generation": "assign_gods_after_conquest"
        }
      },
      
      "god_assignment": {
        "assignment_slots": {
          "tier_1": 3,
          "tier_2": 4, 
          "tier_3": 5
        },
        "slot_unlock_cost": {
          "slot_4": {"gold": 10000, "divine_essence": 100},
          "slot_5": {"gold": 25000, "divine_essence": 500}
        },
        "assignment_benefits": {
          "base_resource_bonus": 0.10,
          "element_match_bonus": 0.15,
          "rarity_bonus": {
            "common": 0.0,
            "rare": 0.05,
            "epic": 0.10,
            "legendary": 0.20
          },
          "defense_power_contribution": "god.total_power * 1.0"
        },
        "assignment_restrictions": {
          "cooldown_after_reassignment": 3600,
          "cannot_assign_if_in_battle": true,
          "one_god_per_territory": false
        }
      },
      
      "resource_generation": {
        "base_formula": "territory.base_rate * (1 + upgrades * 0.08) * stationed_god_bonuses * time_hours",
        "resource_types_by_tier": {
          "tier_1": ["gold", "divine_essence"],
          "tier_2": ["gold", "divine_essence", "skill_books"],
          "tier_3": ["gold", "divine_essence", "skill_books", "awakening_stones"]
        },
        "collection_modes": {
          "manual": {
            "efficiency": 1.0,
            "max_offline_hours": 8
          },
          "auto_hourly": {
            "efficiency": 0.9,
            "max_offline_hours": 12
          },
          "auto_daily": {
            "efficiency": 1.1,
            "max_offline_hours": 24
          }
        },
        "offline_cap": 8,
        "collection_interval": "user_defined"
      },
      
      "territory_defense": {
        "defense_setup": {
          "team_size": 5,
          "defense_team_separate_from_assigned_gods": true,
          "can_use_same_gods_as_stationed": false,
          "auto_defense_ai": "territorial_advantage"
        },
        "defense_bonuses": {
          "home_field_advantage": 0.10,
          "stationed_god_aura": "passive_effects_from_territory",
          "territory_element_bonus": 0.05,
          "tier_defense_multiplier": {
            "tier_1": 1.0,
            "tier_2": 1.2,
            "tier_3": 1.5
          }
        },
        "loss_consequences": {
          "resource_generation_stopped": true,
          "stationed_gods_remain": true,
          "territory_ownership_lost": false,
          "defense_cooldown": 3600
        }
      },
      
      "territory_upgrades": {
        "upgrade_categories": {
          "resource_generation": {
            "max_level": 15,
            "bonus_per_level": 0.08,
            "cost_scaling": "level^1.5"
          },
          "defense_infrastructure": {
            "max_level": 10,
            "defense_bonus_per_level": 0.10,
            "cost_scaling": "level^1.3"
          },
          "god_capacity": {
            "max_level": 2,
            "slots_added": [1, 1],
            "cost_scaling": "exponential"
          }
        },
        "upgrade_costs": {
          "base_cost_formula": "1000 * tier * (level^scaling_factor)",
          "currency_mix": {
            "gold": 0.8,
            "divine_essence": 0.2
          }
        }
      },
      
      "territory_bonuses": {
        "zone_effects": {
          "applies_to_battles": true,
          "affects_stationed_gods": true,
          "affects_defense_team": true,
          "stacks_with_hero_abilities": true
        },
        "adjacency_bonuses": {
          "controlled_adjacent_bonus": 0.05,
          "same_element_chain_bonus": 0.10,
          "territory_network_effects": true
        },
        "synergy_chains": {
          "element_chains": {
            "3_same_element": 0.15,
            "5_same_element": 0.25
          },
          "tier_completion": {
            "all_tier_1": "unlock_tier_2_heroes",
            "all_tier_2": "unlock_tier_3_heroes", 
            "all_tier_3": "unlock_mythic_ascension"
          }
        }
      },
      
      "pvp_integration": {
        "territory_wars": {
          "attack_energy_cost": 8,
          "defense_participation": "automatic",
          "battle_format": "standard_5v5",
          "victory_rewards": {
            "attacker": ["territory_control", "resource_bonus"],
            "defender": ["defense_successful_bonus"]
          }
        },
        "matchmaking": {
          "based_on": ["territory_count", "defense_power", "player_level"],
          "attack_restrictions": {
            "power_difference_limit": 1.5,
            "cooldown_between_attacks": 300
          }
        }
      }
    }
  },
  
  "game_modes": {
    "campaign": {
      "energy_cost": 6,
      "stages_per_chapter": 20,
      "difficulty_scaling": "exponential",
      "first_clear_rewards": "premium",
      "repeat_rewards": "standard"
    },
    "arena": {
      "ticket_cost": 1,
      "ranking_tiers": ["bronze", "silver", "gold", "platinum", "diamond", "champion", "legend"],
      "season_duration": 7,
      "reward_distribution": "weekly"
    },
    "territory_conquest": {
      "description": "Summoners War-style territory battles with god assignment",
      "energy_cost": 8,
      "stages_per_territory": 10,
      "unlock_requirements": "progressive",
      "passive_income": true,
      "conquest_flow": {
        "1_attack_stages": "clear_stages_1_through_10",
        "2_unlock_territory": "defeat_final_stage_boss",
        "3_assign_gods": "place_gods_for_resource_generation",
        "4_set_defense": "optional_pvp_defense_team",
        "5_collect_resources": "automated_or_manual"
      },
      "stage_mechanics": {
        "difficulty_curve": "exponential",
        "enemy_scaling": "1.2x_per_stage",
        "boss_stage": 10,
        "retry_cost": "full_energy",
        "three_star_system": {
          "1_star": "clear_stage",
          "2_star": "no_deaths",
          "3_star": "time_limit_or_condition"
        }
      },
      "god_assignment_post_conquest": {
        "immediate_assignment": true,
        "resource_generation_starts": "immediately",
        "defense_team_optional": true,
        "pvp_vulnerability": "after_24h_grace_period"
      },
      "pvp_defense": {
        "attack_cooldown": 300,
        "defense_rewards": "successful_defense_bonus",
        "loss_penalty": "resource_generation_pause_1h"
      }
    },
    "tower": {
      "energy_cost": 0,
      "floors": 100,
      "reset_type": "monthly",
      "difficulty_curve": "steep"
    },
    "guild_content": {
      "guild_boss": {
        "attempts_per_day": 3,
        "hp_pool": "shared",
        "reward_type": "contribution_based"
      },
      "guild_war": {
        "frequency": "twice_weekly",
        "participants": 20,
        "battle_format": "best_of_three"
      }
    }
  },
  
  "ai_behavior": {
    "targeting_priority": {
      "default": ["lowest_hp", "highest_threat", "elemental_advantage"],
      "healer": ["lowest_hp_percentage_ally", "debuffed_ally", "self"],
      "tank": ["highest_attack_enemy", "targeting_ally", "random"],
      "damage": ["elemental_advantage", "lowest_hp", "highest_attack"]
    },
    
    "ability_usage": {
      "priority_system": {
        "emergency_heal": { "condition": "ally_hp < 30%", "priority": 1 },
        "cleanse": { "condition": "ally_has_debuff", "priority": 2 },
        "buff": { "condition": "no_buffs_active", "priority": 3 },
        "aoe": { "condition": "enemies > 3", "priority": 4 },
        "nuke": { "condition": "enemy_hp < 40%", "priority": 5 },
        "default": { "condition": "always", "priority": 6 }
      }
    },
    
    "territory_defense_ai": {
      "description": "AI behavior for territory defense teams",
      "targeting_priority": {
        "territory_defender": ["protect_stationed_gods", "elemental_advantage", "highest_threat"],
        "stationed_god_ai": ["territorial_knowledge", "element_synergy", "resource_priority"]
      },
      "ability_usage": {
        "home_field_advantage": {
          "use_territory_bonuses": true,
          "prioritize_zone_effects": true,
          "element_matching_bonus": 0.15
        },
        "defensive_positioning": {
          "protect_weak_allies": "high_priority",
          "use_terrain_advantages": true,
          "coordinate_with_stationed_gods": true
        }
      },
      "special_behaviors": {
        "last_stand": {
          "condition": "defense_team_losing",
          "effect": "increased_aggression_and_risk_taking"
        },
        "resource_protection": {
          "condition": "stationed_gods_threatened",
          "effect": "focus_fire_on_biggest_threat"
        }
      }
    }
  },
  
  "validation_rules": {
    "team_composition": {
      "max_team_size": 5,
      "min_team_size": 1,
      "duplicate_heroes": false,
      "faction_bonuses": {
        "2_same_element": { "hp": 0.10 },
        "3_same_element": { "hp": 0.15, "attack": 0.10 },
        "4_same_element": { "hp": 0.20, "attack": 0.15 },
        "5_same_element": { "hp": 0.25, "attack": 0.20 }
      }
    },
    
    "combat_limits": {
      "max_buff_stacks": 10,
      "max_debuff_stacks": 10,
      "max_turn_count": 100,
      "max_summons_per_team": 2,
      "max_resurrections_per_hero": 1
    },
    
    "territory_rules": {
      "god_assignment": {
        "max_gods_per_territory": 5,
        "min_gods_per_territory": 0,
        "same_god_multiple_territories": true,
        "assignment_cooldown": 3600,
        "emergency_reassignment_cost": 10
      },
      "conquest_requirements": {
        "min_power_difference": 0.5,
        "max_power_difference": 3.0,
        "energy_required": 8,
        "team_size": 5,
        "retry_limit": "none"
      },
      "defense_rules": {
        "defense_team_required": false,
        "auto_defense_fallback": "strongest_available_team",
        "defense_cooldown_after_loss": 3600,
        "stationed_gods_cannot_defend": false
      },
      "resource_generation": {
        "max_offline_hours": 24,
        "resource_cap_multiplier": 3.0,
        "generation_stops_on_defense_loss": true,
        "collection_frequency_limit": "every_hour"
      }
    }
  }
}